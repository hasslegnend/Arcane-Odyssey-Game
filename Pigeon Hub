-- SERVICES
local Players = game:GetService("Players")
local UIS = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local plr = Players.LocalPlayer
local PlayerGui = plr:WaitForChild("PlayerGui")

-- CONSTANTS
local ROW_HEIGHT = 30
local FONT = Enum.Font.GothamBold

-- GUI
local Gui = Instance.new("ScreenGui", PlayerGui)
Gui.Name = "PigeonGui"

local Main = Instance.new("Frame", Gui)
Main.Size = UDim2.new(0, 480, 0, 650)
Main.Position = UDim2.new(0.5,0,0.5,0)
Main.AnchorPoint = Vector2.new(0.5,0.5)
Main.BackgroundColor3 = Color3.fromRGB(20,20,20)
Main.Draggable = true
Main.Active = true

-- SECTION
local Section = Instance.new("ScrollingFrame", Main)
Section.Position = UDim2.new(0,10,0,50)
Section.Size = UDim2.new(1,-20,1,-60)
Section.CanvasSize = UDim2.new(0,0,0,0)
Section.AutomaticCanvasSize = Enum.AutomaticSize.Y
Section.ScrollBarThickness = 6
Section.BackgroundColor3 = Color3.fromRGB(15,15,15)

local Layout = Instance.new("UIListLayout", Section)
Layout.Padding = UDim.new(0,8)

-- HELPERS
local function createRow()
	local row = Instance.new("Frame", Section)
	row.Size = UDim2.new(1,0,0,ROW_HEIGHT)
	row.BackgroundTransparency = 1
	return row
end

local function createLabel(row, text)
	local l = Instance.new("TextLabel", row)
	l.Size = UDim2.new(0.55,0,1,0)
	l.BackgroundTransparency = 1
	l.Text = text
	l.Font = FONT
	l.TextSize = 14
	l.TextXAlignment = Left
	l.TextColor3 = Color3.new(1,1,1)
end

local function createToggle(row, callback)
	local bg = Instance.new("Frame", row)
	bg.Size = UDim2.new(0,44,0,22)
	bg.Position = UDim2.new(1,-50,0.5,-11)
	bg.BackgroundColor3 = Color3.fromRGB(60,60,60)
	Instance.new("UICorner", bg).CornerRadius = UDim.new(1,0)

	local knob = Instance.new("Frame", bg)
	knob.Size = UDim2.new(0,18,0,18)
	knob.Position = UDim2.new(0,2,0.5,-9)
	knob.BackgroundColor3 = Color3.new(1,1,1)
	Instance.new("UICorner", knob).CornerRadius = UDim.new(1,0)

	local state = false
	bg.InputBegan:Connect(function()
		state = not state
		bg.BackgroundColor3 = state and Color3.fromRGB(140,0,255) or Color3.fromRGB(60,60,60)
		knob.Position = state and UDim2.new(1,-20,0.5,-9) or UDim2.new(0,2,0.5,-9)
		callback(state)
	end)
end

local function createInput(row, x, placeholder)
	local t = Instance.new("TextBox", row)
	t.Size = UDim2.new(0,70,1,0)
	t.Position = UDim2.new(0,x,0,0)
	t.PlaceholderText = placeholder
	t.BackgroundColor3 = Color3.fromRGB(60,60,60)
	t.TextColor3 = Color3.new(1,1,1)
	t.Font = Enum.Font.Gotham
	t.TextSize = 14
	return t
end

local function createButton(row, x, text, color, cb)
	local b = Instance.new("TextButton", row)
	b.Size = UDim2.new(0,70,1,0)
	b.Position = UDim2.new(0,x,0,0)
	b.Text = text
	b.Font = FONT
	b.TextSize = 14
	b.TextColor3 = Color3.new(1,1,1)
	b.BackgroundColor3 = color
	b.MouseButton1Click:Connect(cb)
end

-- WALK SPEED
do
	local row = createRow()
	createLabel(row, "Walk Speed")
	local input = createInput(row, 200, "16")
	createButton(row, 280, "Apply", Color3.fromRGB(0,140,255), function()
		local v = tonumber(input.Text)
		if v and plr.Character and plr.Character:FindFirstChild("Humanoid") then
			plr.Character.Humanoid.WalkSpeed = v
		end
	end)
	createButton(row, 360, "Reset", Color3.fromRGB(255,60,60), function()
		if plr.Character and plr.Character:FindFirstChild("Humanoid") then
			plr.Character.Humanoid.WalkSpeed = 16
		end
	end)
end

-- FLIGHT
do
	local flying, bv = false, nil
	local row = createRow()
	createLabel(row, "Flight")
	createToggle(row, function(v)
		flying = v
		if not v and bv then bv:Destroy() end
	end)

	RunService.RenderStepped:Connect(function()
		if flying and plr.Character and plr.Character:FindFirstChild("HumanoidRootPart") then
			if not bv then
				bv = Instance.new("BodyVelocity", plr.Character.HumanoidRootPart)
				bv.MaxForce = Vector3.new(1e6,1e6,1e6)
			end
			local cam = workspace.CurrentCamera
			local dir = Vector3.zero
			if UIS:IsKeyDown(Enum.KeyCode.W) then dir += cam.CFrame.LookVector end
			if UIS:IsKeyDown(Enum.KeyCode.S) then dir -= cam.CFrame.LookVector end
			if UIS:IsKeyDown(Enum.KeyCode.A) then dir -= cam.CFrame.RightVector end
			if UIS:IsKeyDown(Enum.KeyCode.D) then dir += cam.CFrame.RightVector end
			bv.Velocity = dir * 50
		end
	end)
end

-- INFINITE JUMP
do
	local enabled = false
	local row = createRow()
	createLabel(row, "Infinite Jump")
	createToggle(row, function(v) enabled = v end)

	UIS.JumpRequest:Connect(function()
		if enabled and plr.Character and plr.Character:FindFirstChild("Humanoid") then
			plr.Character.Humanoid:ChangeState(Enum.HumanoidStateType.Jumping)
		end
	end)
end

-- NOCLIP
do
	local enabled = false
	local row = createRow()
	createLabel(row, "Noclip")
	createToggle(row, function(v) enabled = v end)

	RunService.Stepped:Connect(function()
		if enabled and plr.Character then
			for _,p in pairs(plr.Character:GetChildren()) do
				if p:IsA("BasePart") then p.CanCollide = false end
			end
		end
	end)
end

-- REMOVE INSANITY
do
	local row = createRow()
	createLabel(row, "Remove Insanity")
	createButton(row, 350, "Remove", Color3.fromRGB(90,90,90), function()
		local t = plr.PlayerGui:FindFirstChild("Temp")
		if t and t:FindFirstChild("Insanity") then t.Insanity:Destroy() end
	end)
end

-- REMOVE FOG
do
	local row = createRow()
	createLabel(row, "Remove Fog")
	createButton(row, 350, "Remove", Color3.fromRGB(90,90,90), function()
		local t = plr.PlayerGui:FindFirstChild("Temp")
		if t and t:FindFirstChild("FogParticles") then t.FogParticles:Destroy() end
	end)
end

do
	local enabled = false
	local thread

	local row = createRow()
	createLabel(row, "Auto Wash")

	createToggle(row, function(v)
		enabled = v

		if v then
			thread = task.spawn(function()
				local remote = game.ReplicatedStorage
					:WaitForChild("RS")
					:WaitForChild("Remotes")
					:WaitForChild("Boats")
					:WaitForChild("Wash")

				while enabled do
					remote:FireServer()
					task.wait(2)
				end
			end)
		end
	end)
end


	local enabled = false
	local thread

	local row = createRow()
	createLabel(row, "Auto BirdKill")

	local remote = game.ReplicatedStorage
		:WaitForChild("RS")
		:WaitForChild("Remotes")
		:WaitForChild("Misc")
		:WaitForChild("BirdKill")

	createToggle(row, function(v)
		enabled = v

		if v then
			thread = task.spawn(function()
				while enabled do
					remote:FireServer("Eagle")
					task.wait(1)
				end
			end)
		end
	end)
end

local enabled = false
	local esp = {}

	local CHESTS = {
		["Treasure Chest"] = Color3.fromRGB(255,255,255),
		["Uncommon Chest"] = Color3.fromRGB(255,255,255),
		["Rare Chest"] = Color3.fromRGB(255,255,255),
		["Mystic Chest"] = Color3.fromRGB(255,0,0),
		["Legendary Chest"] = Color3.fromRGB(0,255,0),
	}

	local function clear()
		for _,g in pairs(esp) do
			if g then g:Destroy() end
		end
		esp = {}
	end

	local row = createRow()
	createLabel(row, "Chest ESP")

	createToggle(row, function(v)
		enabled = v
		if not v then clear() end
	end)

	task.spawn(function()
		while true do
			if enabled and plr.Character and plr.Character:FindFirstChild("HumanoidRootPart") then
				local pos = plr.Character.HumanoidRootPart.Position

				for _,m in ipairs(workspace:GetDescendants()) do
					if m:IsA("Model") and CHESTS[m.Name] then
						local p = m.PrimaryPart or m:FindFirstChildWhichIsA("BasePart")
						if p then
							local d = (p.Position - pos).Magnitude
							if d < 2000 then
								if not esp[m] then
									local bb = Instance.new("BillboardGui", m)
									bb.Size = UDim2.new(0,100,0,18)
									bb.AlwaysOnTop = true
									bb.Adornee = p
									bb.StudsOffset = Vector3.new(0,2.5,0)

									local t = Instance.new("TextLabel", bb)
									t.Size = UDim2.new(1,0,1,0)
									t.BackgroundTransparency = 1
									t.Text = m.Name
									t.Font = FONT
									t.TextSize = 13
									t.TextColor3 = CHESTS[m.Name]

									esp[m] = bb
								end
							elseif esp[m] then
								esp[m]:Destroy()
								esp[m] = nil
							end
						end
					end
				end
			end
			task.wait(1)
		end
	end)
end
